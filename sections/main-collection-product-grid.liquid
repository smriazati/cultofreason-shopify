
<div class="page-container page-vert-padding">
    {%- paginate collection.products by 6 -%}
        {%- if collection.products.size == 0 -%}
            <p>This collection is empty</p>
        {%- else -%}
            <div>
                <ul class="product-grid ul-plain">
                    {%- for product in collection.products -%}
                    <li>
                        <a href="{{ product.url }}" class="link-plain">
                            {%- if product.available == false or product.compare_at_price_max > product.price -%}
                                <div class="badge flex-col">
                                    {%- if product.available == false -%}
                                        <p class="btn-circle">Sold out</p>
                                    {%- endif -%}
                                    {% if product.compare_at_price_max > product.price %}
                                        <p class="btn-circle">On sale</p>
                                    {%- endif -%}
                                </div>
                            {%- endif -%}
                            <div class="image-wrapper">
                                <img
                                    src="{{ product.featured_media | image_url: width: 457, height: 570 }}"
                                    alt="{{ product.featured_media.alt | escape }}"
                                    loading="lazy"
                                    width="457"
                                    height="570"
                                    class="object-cover-max"
                                />
                            </div>
                            <div class="text-wrapper">
                                <h2 class="text-product-preview-title">{{ product.title }}</h2>
                                <p class="detail">
                                    {%- if product.compare_at_price_max > 0 -%}
                                        <span class="text-muted text-strike">{{ product.compare_at_price_max | money_without_trailing_zeros }}</span>
                                    {%- endif-%%}
                                    {{ product.price | money_without_trailing_zeros }}
                                </p>
                            </div>
                        </a>
                    </li>
                    {%- endfor -%}
                </ul>


            </div>
        {%- endif -%}
    {%- endpaginate -%}
</div>

{%- style -%}
.product-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-auto-rows: auto;
    grid-column-gap: 1rem;
    grid-row-gap: 1.5rem;
}
.product-grid li a {
    display: grid;
    grid-template-columns: 100%;
    grid-template-rows: auto; 
    position: relative;
}
.product-grid li .badge {
    grid-row: 1 / 2;
    grid-column: 1 / 2;
    position: relative;
    z-index: 11;
    justify-self: end;
    padding-top: 19px;
    padding-right: 13px;
}
.product-grid li .image-wrapper {
    grid-row: 1 / 2;
    grid-column: 1 / 2;
    position: relative;
    z-index: 9;
}
/* .product-grid li .image-wrapper img {
    max-width: 100%;
} */
.product-grid li .text-wrapper {
    grid-row: 2 / 3;
    grid-column: 1 / 2;
    text-align: center;
    padding: 12px 0;
}
.product-grid li .text-wrapper > *:first-child {
    margin-bottom: 4px;
}
{%- endstyle -%}
