<script>
  function setIndexAnimation() {
    if (!gsap) {return }
    const page = document.getElementById('pageIndex');
    const img = page.querySelector('.bg-img');
    const heading = page.querySelector('h1');
    const text = page.querySelector('h2');
    {% comment %} gsap.set(img, {
      y: page.offsetHeight > window.innerHeight ? page.offsetHeight : window.innerHeight,
    }) {% endcomment %}

    {% comment %} gsap.set(heading, {
      y: (window.innerHeight - heading.offsetHeight) / 2 + heading.offsetHeight,
    })

    gsap.set(text, {
      y: (window.innerHeight - text.offsetHeight) / 2 + text.offsetHeight,
    })

    let tl = gsap.timeline({
      defaults: { 
        duration: .7,
        ease: "power3.out" 
      },
    });
    tl.to(img, {y: 0}).to(heading, {y: 0}, "-=.3").to(text, {y: 0}, "-=.3"); {% endcomment %}
  }

  document.addEventListener('DOMContentLoaded', () => {
    setIndexAnimation();
  }, false);

</script>
<div class="page-container" id="pageIndex">
  <div class="bg-img"></div>
  <h1 class="h1 text-center mb-24">{{ section.settings.heading }}</h1>
  <h2 class="large-text text-center">{{ section.settings.text }}</h2>

  <div class="index-main-button bg-dark">
    <a href="/collections/catalog" class="flex-row link-plain">
        {%- for item in (1..3) -%}
            <img src="{{ 'images_mark.svg' | asset_url }}" loading="lazy" width=18 height=18 class="filter-invert">
            <p class="h3 nowrap">{{ section.settings.text2 }}</p>
            <p class="h3 nowrap">Shop now </p>
        {%- endfor -%}
    </a>
  </div>
</div>

{%- render 'dark-mode-styles' -%}

{%- style -%}
body.template-index {
   position: relative;
  /* max-height: 100vh; */
  overflow-x: hidden;
}
body.template-index .page-container {
  height: 100%;
}

body.template-index .page-container h1, 
body.template-index .page-container h2 {
    max-width: 100%;
    width: 100%;
    position: relative;
}

body.template-index .page-container {
    padding: 60px 0;
}
.index-main-button {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 4px 0;
}

.index-main-button a > *:not(last-child) {
    margin-right: 10px;
}

.bg-img {
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
{%- endstyle -%}
<style>
.bg-img {
    background-image: url({{ section.settings.bg_img | image_url }});
}
</style>

{% if section.settings.bg_alignment != blank %}
  {% if section.settings.bg_alignment == 'left' %}
    <style>
      .bg-img {
          background-position: left center;
      }
    </style>
  {% endif %}
  {% if section.settings.bg_alignment == 'middle' %}
    <style>
      .bg-img {
          background-position: center center;
      }
    </style>
  {% endif %}
  {% if section.settings.bg_alignment == 'right' %}
    <style>
      .bg-img {
          background-position: right center;
      }
    </style>
  {% endif %}
{% endif %}

{% schema %}
{
  "name": "Home page",
  "settings": [
    {
      "type": "image_picker",
      "id": "bg_img",
      "label": "Background image"
    },
    {
      "type": "select",
      "id": "bg_alignment",
      "label": "Image alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "middle",
          "label": "Middle"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "middle"
    },
    {
      "type": "text",
      "id": "heading",
      "default": "Clean, simple, effective esthetician-formulated skincare.",
      "label": "Heading"
    },
    {
      "type": "text",
      "id": "text",
      "default": "Meet your skinâ€™s new best friends.",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text2",
      "default": "Always plant-based, vegan, cruelty-free, and made in the USA",
      "label": "Bottom Text"
    }
  ]
}
{% endschema %}